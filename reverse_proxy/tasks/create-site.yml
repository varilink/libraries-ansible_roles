- block:

  - name: Template site nginx configuration to sites-available
    ansible.builtin.template:
      src: nginx.conf.j2
      dest: /etc/nginx/sites-available/{{ wordpress_site_server_name }}.conf
    notify:
      - Nginx configuration changed

  - name: Enable site nginx configuration
    ansible.builtin.file:
      src: /etc/nginx/sites-available/{{ wordpress_site_server_name }}.conf
      dest: /etc/nginx/sites-enabled/{{ wordpress_site_server_name }}.conf
      state: link
    notify:
      - Nginx configuration changed

  become: yes
